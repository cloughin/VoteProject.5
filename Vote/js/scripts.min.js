function initDonationRequestDialog(){$("#donationRequestDialog").dialog({autoOpen:!1,width:"auto",height:"auto",resizable:!1,open:onOpenJqDialog,close:onCloseJqDialog,create:function(){$(this).css("maxWidth","500px")},modal:!0,dialogClass:"donation-request-dialog"});$("#donationRequestDialog .yes a").click(onClickYes);$("#donationRequestDialog .no a").click(onClickNo);$("#donationRequestDialog .already a").click(onClickAlready)}function disableCookie(){$.cookie("dnx","-1",{expires:365})}function onClickYes(){return disableCookie(),$("#donationRequestDialog").dialog("close"),!0}function onClickNo(){$("#donationRequestDialog").dialog("close")}function onClickAlready(){disableCookie();$("#donationRequestDialog").dialog("close")}function openDonationRequestDialog(){PUBLIC.isIframed()||$("#donationRequestDialog").dialog("open")}function getDonationNag(){var n=parseInt($.cookie("dnx"));isNaN(n)&&(n=1);n>=0&&$.ajax({type:"POST",url:"/WebService.asmx/GetDonationNag",data:"{'cookieIndex': "+n+"}",contentType:"application/json; charset=utf-8",dataType:"json",success:getDonationNagSucceeded})}function getDonationNagSucceeded(n){var t=n.d;$.cookie("dnx",t.NextMessageNumber,{expires:365});t.MessageText&&($("#donationRequestDialog .message-text").html(t.MessageText),t.MessageHeading&&$("#donationRequestDialog .heading-text").html(t.MessageHeading),initDonationRequestDialog(),setTimeout(openDonationRequestDialog,2e3))}function initSampleBallotEmailDialog(){$("#sampleBallotEmailDialog").dialog({autoOpen:!1,width:"auto",height:"auto",resizable:!1,open:onOpenJqDialog,close:onCloseJqDialog(),create:function(){$(this).css("maxWidth","500px")},modal:!0,dialogClass:"sample-ballot-email-dialog"});$("#sampleBallotEmailDialog .emailEnter").click(function(){var n=$("#sampleBallotEmailDialog .email").val();submitSampleBallotEmail(n)!==!1&&$("#sampleBallotEmailDialog").dialog("close")});$("#sampleBallotEmailDialog .emailNoThanks").click(function(){$("#sampleBallotEmailDialog").dialog("close")});$("#sampleBallotEmailDialog .already-signed-up").click(function(){setEnteredCookie();$("#sampleBallotEmailDialog").dialog("close")});$(document).keypress(function(n){var i=n.keyCode?n.keyCode:n.which,t;i===13&&(t=$("#sampleBallotEmailDialog .email"),$(".sample-ballot-email-dialog").css("display")!="none"&&t.is(":focus")&&$("#sampleBallotEmailDialog .emailEnter").trigger("click"))})}function getParameterByName(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+n+"=([^&#]*)",r=new RegExp(i,"i"),t=r.exec(window.location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function submitSampleBallotEmail(n){if(n=$.trim(n),!UTIL.isValidEmail(n))return UTIL.alert("Please enter a valid email address"),!1;var t={};t.email=n;t.siteId=getParameterByName("site");t.stateCode=getParameterByName("state");t.electionKey=getParameterByName("election");t.congressionalDistrict=getParameterByName("congress");t.stateSenateDistrict=getParameterByName("stateSenate");t.stateHouseDistrict=getParameterByName("stateHouse");t.county=getParameterByName("county");t.district=getParameterByName("district");t.place=getParameterByName("place");t.elementary=getParameterByName("esd");t.secondary=getParameterByName("ssd");t.unified=getParameterByName("usd");t.cityCouncil=getParameterByName("cc");t.countySupervisors=getParameterByName("cs");t.schoolDistrictDistrict=getParameterByName("sdd");$.ajax({type:"POST",url:"/WebService.asmx/SubmitSampleBallotEmail",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",success:setEnteredCookie})}function setEnteredCookie(){$.cookie("sampleBallotEmailEntered","true",{expires:365})}function openSampleBallotEmailDialog(){PUBLIC.isIframed()||($("#sampleBallotEmailDialog").dialog("open"),$("#sampleBallotEmailDialog .email").val("").focus())}function showSampleBallotDialog(){pendingSBDDialogTimer&&(clearTimeout(pendingSBDDialogTimer),pendingSBDDialogTimer=null);var n=parseInt($.cookie("sampleBallotEmailShown"))||0;$.cookie("sampleBallotEmailShown",(n+1)%5);openSampleBallotEmailDialog();pendingSBDDialogTimer=null}function onOpenJqDialog(){$("body").css("overflow","hidden");$(".ui-widget-overlay").css("width","100%");$(this).parent().appendTo("form");$(this).css("overflow","hidden")}function onCloseJqDialog(){$("body").css("overflow","auto")}function initHoverChildren(){$(".hoverChild").hover(function(){$(this).parent().addClass("hovering")},function(){$(this).parent().removeClass("hovering")})}var PUBLIC,pendingSBDDialogTimer;jQuery.cookie=function(n,t,i){var f,r,e,o,u,s;if(typeof t!="undefined"){i=i||{};t===null&&(t="",i.expires=-1);f="";i.expires&&(typeof i.expires=="number"||i.expires.toUTCString)&&(typeof i.expires=="number"?(r=new Date,r.setTime(r.getTime()+i.expires*864e5)):r=i.expires,f="; expires="+r.toUTCString());var h=i.path?"; path="+i.path:"",c=i.domain?"; domain="+i.domain:"",l=i.secure?"; secure":"";document.cookie=[n,"=",i.noEncode?t:encodeURIComponent(t),f,h,c,l].join("")}else{if(e=null,document.cookie&&document.cookie!="")for(o=document.cookie.split(";"),u=0;u<o.length;u++)if(s=jQuery.trim(o[u]),s.substring(0,n.length+1)==n+"="){e=decodeURIComponent(s.substring(n.length+1));break}return e}};PUBLIC=function(n){function c(t,i){var r=i.newHeader.offset();r&&(r=i.newHeader.offset().top-n(window).scrollTop(),(r<0||r>window.innerHeight)&&n("html,body").animate({scrollTop:i.newHeader.offset().top},200))}function l(n){i=!!n}function u(t,i){if(!i){var f=r(t),u=window.localStorage.getItem(f+"."+t.data("key"));i=u?JSON.parse(u):{}}n(".candidate-cell",t).each(function(){var t=n(this),r=!1,u;t.hasClass("write-in-cell")?(u=i.writeIn,typeof u=="string"?(r=!0,t.addClass("checked")):u="",n("input.write-in-text",t).val(u)):r=i[t.data("key")]===1;n("a.candidate-checkbox",t).toggleClass("checked",r);n("input.candidate-checkbox",t).prop("checked",r)})}function o(t,i){i===!1&&(i=window.localStorage.getItem(n("body").data("election")+"."+t.data("key")));n(".yes,.no",t).each(function(){var t=n(this),r=t.hasClass("yes")&&i==="1"||t.hasClass("no")&&i==="0";n("a.referendum-checkbox",t).toggleClass("checked",r);n("input.referendum-checkbox",t).prop("checked",r)})}function a(){var i={};return t()&&(n(".office-cell").each(function(){var t=n(this),u=t.data("key"),e=r(t),f=window.localStorage.getItem(e+"."+u);f&&(i[u]=JSON.parse(f))}),n(".referendum-content").each(function(){var u=n(this),t=u.data("key"),f=n("body").data("election"),r=window.localStorage.getItem(f+"."+t);r!=null&&(i[t]=r)})),i}function v(){var t=n("body");n.ajax({type:"POST",url:"/WebService.asmx/GetAds",data:"{'electionKey':'"+t.data("adelection")+"','officeKey':'"+t.data("adoffice")+"','adKey':'"+(n.queryString("ad")||"")+"'}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){t.d&&setTimeout(function(){n(".header-inner").before(t.d)})}})}function y(){n(".accordion-container").accordion({collapsible:!0,heightStyle:"content",activate:PUBLIC.accordionActivate,active:!1});n("body").on("click",".show-older-answers",function(){n(this).addClass("hidden").next().slideDown(500)})}function p(){n("input[type=checkbox].kalypto").kalypto({toggleClass:"kalypto-checkbox"})}function w(){n(".ballot-checks-container").on("click",".candidate-cell .clicker",function(t){var i=n(t.target);i.hasClass("clicker")&&i.closest(".candidate-cell").find(".kalypto-checkbox").trigger(n.Event("click"))}).on("click",".referendum-content .clicker",function(t){var i=n(t.target);i.hasClass("clicker")&&i.closest(".yes,.no").find(".kalypto-checkbox").trigger(n.Event("click"))}).on("rc_checked","input.candidate-checkbox",function(){var t=n(this);t.closest(".write-in-cell").addClass("checked");var r=t.closest(".office-cell"),u=r.find("input.candidate-checkbox:checked"),i=r.data("positions")||1;i==1?u.each(function(){this!=t[0]&&(n(this).prop("checked",!1),n(this).next("a").removeClass("checked"),n(this).closest(".write-in-cell").removeClass("checked"))}):u.length>i&&(t.prop("checked",!1),t.next("a").removeClass("checked"),t.closest(".write-in-cell").removeClass("checked"),alert("No more than "+i+" candidates may be selected."));f.apply(this,arguments)}).on("rc_unchecked","input.candidate-checkbox",function(){n(this).closest(".write-in-cell").removeClass("checked");f.apply(this,arguments)}).on("rc_checked","input.referendum-checkbox",function(){var t=n(this),i=t.closest(".yes-no"),r=i.find("input.referendum-checkbox:checked");r.each(function(){this!=t[0]&&(n(this).prop("checked",!1),n(this).next("a").removeClass("checked"))});h.apply(this,arguments)}).on("rc_unchecked","input.referendum-checkbox",function(){h.apply(this,arguments)}).on("propertychange change click keyup input paste","input.write-in-text",f);n(window).on("storage",function(t){var f,e,o;i&&(f=t.originalEvent.key.split("."),f.length==2&&(e=n(".office-cell[data-key="+f[1]+"]"),o=r(e),f[0]===o&&e.length===1&&u(e)))})}function b(t,i,r,u){n.ajax({type:"POST",url:"/WebService.asmx/GetBannerAd",data:"{'adType':'"+t+"','stateCode':'"+(i||"")+"','electionKey':'"+(r||"")+"','officeKey':'"+(u||"")+"','adKey':'"+n.queryString("ad")+"'}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){t.d&&setTimeout(function(){n(".header-inner").before('<div id="ads">'+t.d+"<\/div>")})}})}function r(t){return t.data("election")||n("body").data("election")}function s(){var t=n(this),r=t.parent(),i;n(".video-player iframe").each(function(){var t=n(this).parent();n(this).replaceWith(n(this).parent().data("html"));n(">div",t).click(s)});i=n("<iframe><\/iframe>",{src:"//www.youtube.com/embed/"+this.parentNode.dataset.id+"?rel=0&autoplay=1&autohide=1&border=0&wmode=opaque&enablejsapi=1&controls=2&showinfo=0",frameborder:"0",allowfullscreen:"allowfullscreen","class":"video-iframe youtube-iframe"});r.data("html","<div>"+t.replaceWith(i).html()+"<\/div>")}function k(t){n(".video-player",t).each(function(){var t=n("<div><\/div>"),r=n(this),i=r.data("type"),u=r.data("id"),f=i=="yt"?"//i.ytimg.com/vi/"+u+"/hqdefault.jpg":"https://graph.facebook.com/"+u+"/picture";t.html('<img class="video-thumb" src="'+f+'"><div class="video-play-button '+i+'-play-button"><\/div>');i=="yt"?t.click(s):i=="fb"&&t.click(function(){var t=n("<iframe><\/iframe>",{src:"https://www.facebook.com/plugins/video.php?href=https%3A%2F%2Fwww.facebook.com%2Fvideo.php?v="+this.parentNode.dataset.id+"&autoplay=1&mute=0&height=236&width=420",frameborder:"0",allowfullscreen:"allowfullscreen","class":"video-iframe facebookvideo-iframe"});n(this).replaceWith(t)});r.append(t)})}function d(){t()&&(n(".office-cell").each(function(){u(n(this))}),n(".referendum-content").each(function(){o(n(this),!1)}))}function t(){try{var t=window.localStorage,n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(i){return!1}}function f(){var u,f,e;i&&t()&&(u={},f=n(this).closest(".office-cell"),n("a.candidate-checkbox.checked",f).each(function(){var t=n(this).closest(".candidate-cell");t.hasClass("write-in-cell")?u.writeIn=n(".write-in-text",t).val():u[t.data("key")]=1}),e=r(f)+"."+f.data("key"),n.isEmptyObject(u)?window.localStorage.removeItem(e):window.localStorage.setItem(e,JSON.stringify(u)))}function h(){var u;if(i&&t()){var r=null,f=n(this).closest(".yes-no"),o=f.closest(".referendum-content").data("key"),e=n("a.referendum-checkbox.checked",f);e.length&&(r=e.next().text()==="Yes"?1:0);u=n("body").data("election")+"."+o;r===null?window.localStorage.removeItem(u):window.localStorage.setItem(u,r)}}function g(){if(t()){var i=window.localStorage.getItem("ballotUrl");i&&n("body").addClass("has-back-to-ballot").append('<div class="back-to-ballot no-print"><a href="'+i+'" class="button-4 button-smaller no-print">Back to Your Ballot Choices<\/a><\/div>')}}function nt(){try{return window.self!==window.top}catch(n){return!0}}var e,i=!0;return window.$=jQuery,n(function(){var t=Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject;(t||Function("/*@cc_on return document.documentMode===10@*/")())&&(document.documentElement.className+=" ie10");t&&(document.documentElement.className+=" ie11");n("body").removeClass("no-js").addClass("js").on("click","span.more-text",function(){var t=n(this),i=t.removeClass("more-text").addClass("more-ajax").data("key");n.ajax({type:"POST",url:"/WebService.asmx/GetMoreText",contentType:"application/json; charset=utf-8",dataType:"json",data:'{"key":"'+i+'"}',success:function(n){var r=t.parent(),i;t.remove();i=n.d.indexOf("<\/p>");i===-1?r.append(n.d):(r.append(n.d.substr(0,i)),r.after(n.d.substr(i+4)+"<\/p>"))},error:function(){t.removeClass("more-ajax").addClass("more-text")}})}).on("click",".answer-video .video-icon",function(t){var r=n(this).closest(".answer-video"),i=n(".video-wrapper,.video-container",r);i.length&&(t.preventDefault(),i.show(0),n(".video-thumb",i).parent().click())}).on("accordionbeforeactivate",".ui-accordion",function(t,i){var r,u,f;return i.newHeader.hasClass("loading")?!1:i.newHeader.length&&!i.newHeader.hasClass("loaded")&&(r=i.newPanel.data("ajax"),r)?(u=n(this),f=i.newHeader.index()/2,i.newHeader.addClass("loading"),n.ajax({type:"GET",url:"/AjaxContent.aspx?"+r,dataType:"html",success:function(n){i.newPanel.html(n);k(i.newPanel);i.newHeader.addClass("loaded");setTimeout(function(){i.newHeader.removeClass("loading");u.accordion("option","active",f)},200);i.newPanel.data("ajax",null)},error:function(){i.newHeader.removeClass("loading")}}),!1):void 0});n(".address-entry").on("click",".need-address",function(){if(event.preventDefault(),n(this).hasClass("disabled")){ADDRESSENTRY.alert("Please enter your street address first");return}}).on("click",".no-contests",function(){event.preventDefault();ADDRESSENTRY.alert("There are no office contests or ballot measures for your legislative districts");return});n(document).on("click",function(t){e&&!n.contains(n(".sample-ballot-link")[0],t.target)&&e.hide()})}),{accordionActivate:c,getAllBallotChecks:a,initAds:v,initAnswerAccordions:y,initBallotCheckBoxes:p,initBallotEvents:w,initBannerAd:b,isIframed:nt,loadMyBallotChoices:d,localStorageIsAvailable:t,setCanUpdateBallot:l,setupBackToBallot:g,updateBallotMeasureChecks:o,updateOfficeChecks:u}}(jQuery);$(function(){function y(){var t=$.cookie("State"),u=$.cookie("Congress"),f=$.cookie("StateSenate"),i=$.cookie("StateHouse"),e=$.cookie("County"),o=$.cookie("District"),s=$.cookie("Place"),h=$.cookie("Elementary"),c=$.cookie("Secondary"),l=$.cookie("Unified"),a=$.cookie("CityCouncil"),v=$.cookie("CountySupervisors"),y=$.cookie("SchoolDistrictDistrict"),n,p;t&&u&&f&&(i||t=="DC"||t=="NE")&&e&&o!=null&&s!=null?(n=[],n.push("State="+t),n.push("Congress="+u),n.push("StateSenate="+f),i&&n.push("StateHouse="+i),n.push("County="+e),n.push("District="+o),n.push("Place="+s),h&&n.push("Esd="+h),c&&n.push("Ssd="+c),l&&n.push("Usd="+l),a&&n.push("Cc="+a),v&&n.push("Cs="+v),y&&n.push("Sdd="+y),$(".active-button-block .elected-officials").attr("href","/Elected.aspx?"+n.join("&")),p={stateCode:t,congress:u,stateSenate:f,stateHouse:i,county:e,district:o,place:s,elementary:h||"",secondary:c||"",unified:l||"",cityCouncil:a||"",countySupervisors:v||"",schoolDistrictDistrict:y||""},$.ajax({type:"POST",url:"/WebService.asmx/GetUpcomingElections",data:JSON.stringify(p),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var u=n.d.Elections,t,i;switch(u.length){case 0:r("Could not determine elections");break;default:t=[];$.each(u,function(){var n=this.HasContests?"":" disabled no-contests",i=this.HasContests?"":'<p class="no-contests-message">There are no office contests or ballot measures for your legislative districts.<\/p>';t.push('<li><a class="big-orange-button bob-with-arrow'+n+'" href="'+this.Href+'">'+this.Description+"<\/a>"+i+"<\/li>")});$(".active-button-block ul").html(t.join(""));i=$(".active-button-block .not-available");n.d.IsPast?i.text("Upcoming election information is not yet available. Here is your most recent election:"):i.addClass("hidden");$(".address-entry .active-button-block").removeClass("hidden");$(".address-entry .default-button-block").addClass("hidden")}},error:function(n){r(n.status+" "+n.statusText)}})):r("Could not determine elections")}function p(){i=!0;$(".default-button-block").addClass("hidden");$(".active-button-block").addClass("hidden");$(".enrollment-button-block").removeClass("hidden")}function w(n){s=n}function u(n){n?(f.val(n).prop("disabled",!0),i||y()):(f.val(n).prop("disabled",!1),$(".active-button-block").addClass("hidden"),$(".enrollment-button-block").addClass("hidden"),$(".default-button-block").toggleClass("hidden",i))}var t,o,n=null,c=!1,i=!1,s=null,l=function(n){return String(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u2018/g,"&lsquo;").replace(/\u2019/g,"&rsquo;").replace(/\u201C/g,"&ldquo;").replace(/\u201D/g,"&rdquo;").replace(/\u00AE/g,"&reg;").replace(/\u2122/g,"&trade;").replace(/\u2013/g,"&ndash;").replace(/\u2014/g,"&mdash;")},a=function(){c||($("body").append('<div id="alert-dialog" class="hidden"><div class="inner"><div class="message"><\/div><div class="bottom-box button-box"><input type="button" class="alert-button-1 button-1 button-smaller"/><input type="button" class="alert-button-2 button-1 button-smaller"/><input type="button" class="alert-button-3 button-1 button-smaller"/><input type="button" class="alert-button-4 button-1 button-smaller"/><\/div><\/div><\/div>'),t=$("#alert-dialog").dialog({autoOpen:!1,close:v,dialogClass:"alert-dialog",modal:!0,resizable:!1,width:"auto",minHeight:0}),o=$("input[type=button]",t).on("click",function(i){var r=null;n&&(r=n,n=null);t.dialog("close");r&&r($(i.target).val())}),c=!0)},r=function(){var i,u,c;a();var f=0,e="Message",s="Alert",h=null,r=["Ok"];for(arguments.length>0&&typeof arguments[0]=="string"&&(e=arguments[f++]),i=f;i<arguments.length;i++)switch(typeof arguments[i]){case"string":s=arguments[i];break;case"function":h=arguments[i];break;default:$.isArray(arguments[i])&&(r=arguments[i])}for(i=0;i<r.length;)u=i+1,(u===r.length||typeof r[u]!="number")&&r.splice(u,0,1),i+=2;for(t.dialog("option","title",l(s)),$(".message",t).html(l(e).replace(/\n/g,"<br />")),n=h,o.hide().removeClass("button-1 button-2 button-3"),i=0;i<r.length;i+=2)c=i/2,$(o[c]).show().val(r[i]).addClass("button-"+r[i+1]);t.dialog("open")},v=function(){if(n){var t=n;n=null;t("esc")}},f=$(".address-entry .address-search"),e,h;($.cookie("Address")&&$.cookie("State")&&$.cookie("County")&&$.cookie("Congress")&&$.cookie("StateSenate")&&$.cookie("District")!=null&&$.cookie("Place")!=null&&$.cookie("Geo")?$.ajax({type:"POST",url:"/WebService.asmx/IsCookieTrusted",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n.d?u($.cookie("Address")):u("")}}):u(""),$(".address-entry .use-this-address").click(function(){$.ajax({type:"POST",url:"/WebService.asmx/UseThisAddress",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({forEnrollment:!!i,forEnrollmentEmail:s||""}),success:function(n){var t=n.d;t&&(document.location.href=t)},error:function(){e.html(response.status+" "+response.statusText)}})}),typeof google!="undefined")&&(e=$(".address-entry .error-message"),e.text(""),$(".address-entry .enter-new-address").click(function(){u("");event.preventDefault()}),$(".address-entry .use-address").click(function(){r("Vote-USA uses your address only to provide you with customized electoral information, including your ballot choices, elected representatives, and various election reports. We do not sell, trade, or otherwise transfer any of this information to any other person, organization or third party. We cookie your address for the sole purpose of saving you the trouble of reentering it when next you visit this site.");event.preventDefault()}),h=new google.maps.places.Autocomplete(f[0],{types:["geocode"],componentRestrictions:{country:"us"}}),f.on("focus",function(){($(window).height()<=432||$(window).width()<=432)&&$("html, body").animate({scrollTop:f.offset().top-10},500)}).keypress(function(n){(n.keyCode===10||n.keyCode===13)&&n.preventDefault()}),h.addListener("place_changed",function(){function a(){r("There is not enough information to reliably determine your voting districts. Please include a street address along with a zip code or a city and state.")}var v={street_number:"short_name",route:"long_name",locality:"long_name",sublocality:"long_name",sublocality_level_1:"long_name",administrative_area_level_1:"short_name",postal_code:"short_name",postal_code_suffix:"short_name"},t=h.getPlace(),n,f,l,y,o,c,p;if(!t||!t.address_components||!t.formatted_address||!t.geometry||!t.geometry.location){a();return}for(n={},f=0;f<t.address_components.length;f++)l=t.address_components[f].types[0],v[l]&&(y=t.address_components[f][v[l]],n[l]=y);for(n.formatted_address=t.formatted_address,n.lat=t.geometry.location.lat(),n.lng=t.geometry.location.lng(),n.street_address=$.trim((n.street_number||"")+" "+(n.route||"")),n.city=n.locality||n.sublocality||n.sublocality_level_1||"",n.state=n.administrative_area_level_1,n.zip5=n.postal_code||"",n.zip4=n.postal_code_suffix||"",o=[n.street_address,n.city,n.state,n.zip5,n.zip4],c=0;c<o.length;c++)o[c]=encodeURIComponent(o[c]);if(n.components=o.join("|"),!n.street_address){a();return}p={formattedAddress:n.formatted_address,components:n.components,stateCode:n.administrative_area_level_1,latitude:n.lat,longitude:n.lng,forEnrollment:!!i,forEnrollmentEmail:s||""};$.ajax({type:"POST",url:"/WebService.asmx/FindLocation",contentType:"application/json; charset=utf-8",data:JSON.stringify(p),dataType:"json",success:function(t){var r=t.d,f,o;r.ErrorMessage?e.html(r.ErrorMessage):(r.DomainCode==="US"&&(f=30,$.cookie("Address",r.FormattedAddress,{expires:f}),$.cookie("Components",n.components,{expires:f,noEncode:!0}),$.cookie("State",r.StateCode,{expires:f}),$.cookie("Congress",r.Congress,{expires:f}),$.cookie("County",r.County,{expires:f}),$.cookie("StateSenate",r.StateSenate,{expires:f}),$.cookie("StateHouse",r.StateHouse,{expires:f}),$.cookie("District",r.District,{expires:f}),$.cookie("Place",r.Place,{expires:f}),$.cookie("Elementary",r.Elementary,{expires:f}),$.cookie("Secondary",r.Secondary,{expires:f}),$.cookie("Unified",r.Unified,{expires:f}),$.cookie("CityCouncil",r.CityCouncil,{expires:f}),$.cookie("CountySupervisors",r.CountySupervisors,{expires:f}),$.cookie("SchoolDistrictDistrict",r.SchoolDistrictDistrict,{expires:f}),$.cookie("Geo",n.lat.toFixed(6)+","+n.lng.toFixed(6),{expires:f,noEncode:!0}),o=new Date,o.setDate(o.getDate()+f),$.cookie("CDate",o.getUTCMonth()+1+"/"+o.getUTCDate()+"/"+o.getUTCFullYear()+" "+o.getUTCHours()+":"+o.getUTCMinutes()+":"+o.getUTCSeconds(),{expires:f}),$("body").data("c","True")),r.Success&&(i?document.location.href=r.RedirectUrl:u($.cookie("Address"))))},error:function(n){e.html(n.status+" "+n.statusText)}})}),window.ADDRESSENTRY={alert:r,setForEnrollment:p,setForEnrollmentEmail:w})});window.UTIL=function(n){function e(n){return String(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u2018/g,"&lsquo;").replace(/\u2019/g,"&rsquo;").replace(/\u201C/g,"&ldquo;").replace(/\u201D/g,"&rdquo;").replace(/\u00AE/g,"&reg;").replace(/\u2122/g,"&trade;").replace(/\u2013/g,"&ndash;").replace(/\u2014/g,"&mdash;")}function c(){var i=Math.max(n(window).height()-t.outerHeight(),0)/2,r=Math.max(n(window).width()-t.outerWidth(),0)/2;t.css({top:i+n(window).scrollTop(),left:r+n(window).scrollLeft()})}function p(){h||(u=n('<div id="ajax-overlay"><\/div>'),t=n('<div id="ajax-overlay-content"><img src="/images/ajax-loader64.gif"/><\/div>'),u.hide(),t.hide(),n("body").append(u,t))}function w(){p();t.css({width:"auto",height:"auto"});c();n(window).bind("resize.modal",c);t.show();u.show()}function b(){t.hide();u.hide();n(window).unbind("resize.modal")}function k(n){return typeof n!="string"?!1:!!n.match(l)}var h,u,t,l;n.extend({queryString:function(t){var r;if(t)return n.queryString()[t.toLowerCase()];var u=[],i,f=window.location.href.split("#")[0],e=f.slice(f.indexOf("?")+1).split("&");for(r=0;r<e.length;r++)i=e[r].split("="),i[0]=i[0].toLocaleLowerCase(),u.push(i[0]),u[i[0]]=i[1];return u}});var r,f,i=null,o=!1,a=function(){o||(n("body").append('<div id="alert-dialog" class="hidden"><div class="inner"><div class="message"><\/div><div class="bottom-box button-box"><input type="button" class="alert-button-1 button-1 button-smallest"/><input type="button" class="alert-button-2 button-1 button-smallest"/><input type="button" class="alert-button-3 button-1 button-smallest"/><input type="button" class="alert-button-4 button-1 button-smallest"/><\/div><\/div><\/div>'),r=n("#alert-dialog").dialog({autoOpen:!1,close:y,dialogClass:"alert-dialog",modal:!0,resizable:!1,width:"auto"}),f=n("input[type=button]",r).on("click",function(t){var u=null;i&&(u=i,i=null);r.dialog("close");u&&u(n(t.target).val())}),o=!0)},s=function(){var t,o,v;a();var s=0,h="Message",c="Alert",l=null,u=["Ok"];for(arguments.length>0&&typeof arguments[0]=="string"&&(h=arguments[s++]),t=s;t<arguments.length;t++)switch(typeof arguments[t]){case"string":c=arguments[t];break;case"function":l=arguments[t];break;default:n.isArray(arguments[t])&&(u=arguments[t])}for(t=0;t<u.length;)o=t+1,(o===u.length||typeof u[o]!="number")&&u.splice(o,0,1),t+=2;for(r.dialog("option","title",e(c)),n(".message",r).html(e(h).replace(/\n/g,"<br />")),i=l,f.hide().removeClass("button-1 button-2 button-3"),t=0;t<u.length;t+=2)v=t/2,n(f[v]).show().val(u[t]).addClass("button-"+u[t+1]);r.dialog("open")},v=function(){var t=[].slice.call(arguments),i;t.push(["Ok","Cancel",3]);i=0;n.each(t,function(n){typeof t[n]=="string"&&i++});i<2&&t.push("Confirm");s.apply(this,t)},y=function(){if(i){var n=i;i=null;n("esc")}};return h=!1,l=/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,{alert:s,closeModal:b,confirm:v,htmlEscape:e,isValidEmail:k,openModal:w}}(jQuery);$(function(){$("#donationRequestDialog").length&&getDonationNag()});$(function(){function r(){i.val()==="Other"?$(".email-form-other-subject").show(200):$(".email-form-other-subject").hide(200)}var i=$(".email-form-subject"),n,t;i.change(r);r();n=$(".email-form-error-label");t=$(".email-form-good-label");n.length!==0?UTIL.alert(n.text()):t.length!==0&&UTIL.alert(t.text())});$(function(){initSampleBallotEmailDialog();var n=parseInt($.cookie("sampleBallotEmailShown"))||0;(typeof SampleBallotEmailDialogEnabled=="undefined"||window.SampleBallotEmailDialogEnabled)&&n===0&&$.cookie("sampleBallotEmailEntered")!=="true"&&(pendingSBDDialogTimer=setTimeout(function(){showSampleBallotDialog()},15e3))});$(function(){initHoverChildren()});